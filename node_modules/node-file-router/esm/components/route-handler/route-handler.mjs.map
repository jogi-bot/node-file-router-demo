{"version":3,"file":"route-handler.mjs","names":["pipe","filterValues","mapKeys","mapValues","decodeSlugParam","RouteHandler","constructor","props","Object","assign","getRouteParams","pathname","groups","RegExp","regex","exec","Boolean","group","key","paramExtractors"],"sources":["../../../../src/components/route-handler/route-handler.ts"],"sourcesContent":["import { pipe } from '../../utils/fp.utils';\nimport { filterValues, mapKeys, mapValues } from '../../utils/object.utils';\nimport { decodeSlugParam } from '../slug-param/slug-param';\nimport type { Dictionary } from '../../types/dictionary';\nimport type { ParamExtractor } from '../dynamic-routes/common/route-params-parser';\n\nimport type { RequestHandler } from '../../types/request-handler';\n\ninterface Props {\n  method?: string;\n  fileName: string;\n  handler: RequestHandler | Record<string, RequestHandler>;\n  regex: RegExp;\n  paramExtractors: Record<string, ParamExtractor>;\n  nestingLevel: number;\n}\n\nexport class RouteHandler {\n  method?: string;\n  fileName: string;\n  handler: RequestHandler | Record<string, RequestHandler>;\n  regex: RegExp;\n  nestingLevel: number;\n\n  private paramExtractors: Record<string, ParamExtractor>;\n\n  constructor(props: Props) {\n    Object.assign(this, props);\n  }\n\n  getRouteParams(pathname: string): Dictionary<string> {\n    const groups = new RegExp(this.regex).exec(pathname)?.groups || {};\n    return pipe(\n      filterValues<string>(Boolean),\n      mapValues<string, string | string[]>((group, key) =>\n        this.paramExtractors[key](group)\n      ),\n      mapKeys(decodeSlugParam)\n    )(groups);\n  }\n}\n"],"mappings":"SAASA,IAAI;AAAA,SACJC,YAAY,EAAEC,OAAO,EAAEC,SAAS;AAAA,SAChCC,eAAe;AAexB,OAAO,MAAMC,YAAY,CAAC;EASxBC,WAAWA,CAACC,KAAY,EAAE;IACxBC,MAAM,CAACC,MAAM,CAAC,IAAI,EAAEF,KAAK,CAAC;EAC5B;EAEAG,cAAcA,CAACC,QAAgB,EAAsB;IACnD,MAAMC,MAAM,GAAG,IAAIC,MAAM,CAAC,IAAI,CAACC,KAAK,CAAC,CAACC,IAAI,CAACJ,QAAQ,CAAC,EAAEC,MAAM,IAAI,CAAC,CAAC;IAClE,OAAOZ,IAAI,CACTC,YAAY,CAASe,OAAO,CAAC,EAC7Bb,SAAS,CAA4B,CAACc,KAAK,EAAEC,GAAG,KAC9C,IAAI,CAACC,eAAe,CAACD,GAAG,CAAC,CAACD,KAAK,CACjC,CAAC,EACDf,OAAO,CAACE,eAAe,CACzB,CAAC,CAACQ,MAAM,CAAC;EACX;AACF"}