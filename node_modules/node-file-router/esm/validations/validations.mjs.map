{"version":3,"file":"validations.mjs","names":["path","fs","FileRouterError","getType","validateFileFormat","filePath","module","relativeFilePath","relative","process","cwd","exportType","default","includes","validateBaseDirExistence","normalizedPath","normalize","stat","catch"],"sources":["../../../src/validations/validations.ts"],"sourcesContent":["import path from 'node:path';\nimport fs from 'node:fs/promises';\n\nimport { FileRouterError } from '../utils/error.utils';\nimport { getType } from '../utils/common.utils';\nimport type { Dictionary } from '../types/dictionary';\n\nexport function validateFileFormat<M extends Dictionary<unknown>>(\n  filePath: string,\n  module: M\n): M {\n  const relativeFilePath = path.relative(process.cwd(), filePath);\n\n  if (!('default' in module)) {\n    throw new FileRouterError(\n      `The file '${relativeFilePath}' does not contain a default export. It should export a default object or function.`\n    );\n  }\n\n  const exportType = getType(module.default);\n  if (!['object', 'function'].includes(exportType)) {\n    throw new FileRouterError(\n      `The file '${relativeFilePath}' is currently exporting ${exportType}. It should only export either a function or an object.`\n    );\n  }\n\n  return module;\n}\n\nexport async function validateBaseDirExistence(filePath: string) {\n  const normalizedPath = path.normalize(filePath);\n  return fs.stat(normalizedPath).catch(() => {\n    throw new FileRouterError(\n      `The folder on the \"${filePath}\" isn't found. Create it or provide \"baseDir\" with the valid path.`\n    );\n  });\n}\n"],"mappings":"AAAA,OAAOA,IAAI,MAAM,WAAW;AAC5B,OAAOC,EAAE,MAAM,kBAAkB;AAAC,SAEzBC,eAAe;AAAA,SACfC,OAAO;AAGhB,OAAO,SAASC,kBAAkBA,CAChCC,QAAgB,EAChBC,MAAS,EACN;EACH,MAAMC,gBAAgB,GAAGP,IAAI,CAACQ,QAAQ,CAACC,OAAO,CAACC,GAAG,CAAC,CAAC,EAAEL,QAAQ,CAAC;EAE/D,IAAI,EAAE,SAAS,IAAIC,MAAM,CAAC,EAAE;IAC1B,MAAM,IAAIJ,eAAe,CACtB,aAAYK,gBAAiB,qFAChC,CAAC;EACH;EAEA,MAAMI,UAAU,GAAGR,OAAO,CAACG,MAAM,CAACM,OAAO,CAAC;EAC1C,IAAI,CAAC,CAAC,QAAQ,EAAE,UAAU,CAAC,CAACC,QAAQ,CAACF,UAAU,CAAC,EAAE;IAChD,MAAM,IAAIT,eAAe,CACtB,aAAYK,gBAAiB,4BAA2BI,UAAW,yDACtE,CAAC;EACH;EAEA,OAAOL,MAAM;AACf;AAEA,OAAO,eAAeQ,wBAAwBA,CAACT,QAAgB,EAAE;EAC/D,MAAMU,cAAc,GAAGf,IAAI,CAACgB,SAAS,CAACX,QAAQ,CAAC;EAC/C,OAAOJ,EAAE,CAACgB,IAAI,CAACF,cAAc,CAAC,CAACG,KAAK,CAAC,MAAM;IACzC,MAAM,IAAIhB,eAAe,CACtB,sBAAqBG,QAAS,oEACjC,CAAC;EACH,CAAC,CAAC;AACJ"}